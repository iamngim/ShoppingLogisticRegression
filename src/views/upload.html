{% extends "layout.html" %}
{% block content %}

<div class="card p-5 mb-5 text-center animate__animated animate__fadeIn">
    <h1 class="fw-bold mb-3">
        H·ªÜ TH·ªêNG PH√ÇN T√çCH & D·ª∞ B√ÅO H√ÄNH VI MUA S·∫ÆM
    </h1>
    <p class="text-muted fs-5">
        ·ª®ng d·ª•ng <b>Logistic Regression</b> tr√™n n·ªÅn t·∫£ng
        <b>Apache Spark MLlib</b> ƒë·ªÉ d·ª± b√°o h√†nh vi mua s·∫Øm theo t·ª´ng qu√Ω
    </p>

    <div class="mt-4">
        <a href="#upload" class="btn btn-primary btn-lg me-3">
            <i class="bi bi-upload"></i> B·∫Øt ƒë·∫ßu v·ªõi d·ªØ li·ªáu
        </a>
        <a href="/evaluation" class="btn btn-outline-secondary btn-lg">
            <i class="bi bi-graph-up"></i> Xem k·∫øt qu·∫£ m·∫´u
        </a>
    </div>
</div>

<!-- C√°c t√≠nh nƒÉng -->
<div class="row mb-5">
    <div class="col-md-3">
        <div class="card p-4 text-center h-100">
            <i class="bi bi-database fs-1 text-primary"></i>
            <h5 class="mt-3 fw-semibold">X·ª≠ l√Ω d·ªØ li·ªáu l·ªõn</h5>
            <p class="text-muted">
                Ph√¢n t√≠ch d·ªØ li·ªáu giao d·ªãch quy m√¥ l·ªõn b·∫±ng Apache Spark
            </p>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card p-4 text-center h-100">
            <i class="bi bi-cpu fs-1 text-success"></i>
            <h5 class="mt-3 fw-semibold">H·ªçc m√°y</h5>
            <p class="text-muted">
                Hu·∫•n luy·ªán Logistic Regression b·∫±ng Spark MLlib
            </p>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card p-4 text-center h-100">
            <i class="bi bi-graph-up-arrow fs-1 text-warning"></i>
            <h5 class="mt-3 fw-semibold">ƒê√°nh gi√° m√¥ h√¨nh</h5>
            <p class="text-muted">
                ROC, Confusion Matrix, Precision, Recall, F1-score
            </p>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card p-4 text-center h-100">
            <i class="bi bi-lightning-charge fs-1 text-danger"></i>
            <h5 class="mt-3 fw-semibold">D·ª± ƒëo√°n th√¥ng minh</h5>
            <p class="text-muted">
                D·ª± ƒëo√°n h√†nh vi mua s·∫Øm cho kh√°ch h√†ng m·ªõi
            </p>
        </div>
    </div>
</div>

<!-- Quy tr√¨nh th·ª±c hi·ªán -->
<div class="card p-4 mb-5">
    <h3 class="fw-bold mb-4">üîÅ Quy tr√¨nh h·ªá th·ªëng</h3>

    <div class="row text-center">
        <div class="col-md-2">
            <span class="badge bg-primary fs-6">1</span>
            <p class="mt-2">Upload d·ªØ li·ªáu</p>
        </div>
        <div class="col-md-2">
            <span class="badge bg-secondary fs-6">2</span>
            <p class="mt-2">Ti·ªÅn x·ª≠ l√Ω</p>
        </div>
        <div class="col-md-2">
            <span class="badge bg-info fs-6">3</span>
            <p class="mt-2">Th·ªëng k√™ m√¥ t·∫£</p>
        </div>
        <div class="col-md-2">
            <span class="badge bg-warning fs-6">4</span>
            <p class="mt-2">Hu·∫•n luy·ªán</p>
        </div>
        <div class="col-md-2">
            <span class="badge bg-success fs-6">5</span>
            <p class="mt-2">ƒê√°nh gi√°</p>
        </div>
        <div class="col-md-2">
            <span class="badge bg-danger fs-6">6</span>
            <p class="mt-2">D·ª± ƒëo√°n</p>
        </div>
    </div>
</div>

<!-- Upload file v√† hu·∫•n luy·ªán -->
<div class="card p-5" id="upload">
    <h3 class="fw-bold mb-3">üìÇ Upload d·ªØ li·ªáu giao d·ªãch</h3>
    <p class="text-muted">
        T·∫£i l√™n file d·ªØ li·ªáu giao d·ªãch (CSV) ƒë·ªÉ b·∫Øt ƒë·∫ßu qu√° tr√¨nh ph√¢n t√≠ch
        v√† hu·∫•n luy·ªán m√¥ h√¨nh.
    </p>

    {% if msg %}
    <div class="alert alert-success animate__animated animate__fadeInUp">
        {{ msg }}
    </div>
    {% endif %}

    <form method="post" action="/upload" enctype="multipart/form-data">
        <div class="row align-items-center">
            <div class="col-md-8">
                <input type="file" class="form-control form-control-lg" name="file" required>
            </div>
            <div class="col-md-4">
                <button class="btn btn-primary btn-lg w-100">
                    <i class="bi bi-cloud-arrow-up"></i> Upload & X·ª≠ l√Ω
                </button>
            </div>
        </div>
    </form>
</div>

{% endblock %}

<script>
    document.querySelector("form").addEventListener("submit", function () {
        const btn = document.querySelector("button");
        btn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> ƒêang hu·∫•n luy·ªán...';
        btn.disabled = true;
    });
</script>
